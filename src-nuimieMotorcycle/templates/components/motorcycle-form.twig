<!--#set($CmsSettingUtil = $webutil.getBean("cmsSettingUtil"))
#set($partner = $CmsSettingUtil.findCMSSetting($partnerCode))
#set($partnerContent = $dotcontent.find($partner.getPartnerIdentifier()))
#set($partnerConIdentifier = $partnerContent.identifier)
#set($products = $dotcontent.pullRelated("WlpPartnerStructure.wlpproductstructures","${partnerConIdentifier}",false,0,"WlpProductStructure.sequence asc"))
#foreach($content in $products)
    #set $productDisclosurePDFUri = $content.productDisclosureSheet.uri
    #set $productDisclosurePDFHTML = $content.productDisclosureSheetHTML
#end-->
<div id="motorcycle-form" class="form-wizard">
    <!-- The base URL for all the API calls -->
    <input type="hidden" name="tieBaseUrl" value="">

    <!-- Depending on the stage of the subscription journey, the form will behave differently. -->
    <input type="hidden" name="stage" value="{{ stage }}">

    <!-- Default Values -->
    <!--<input type="hidden" name="productDisclosurePDFUri" value="${productDisclosurePDFUri}" />-->
    <input type="hidden" name="productDisclosurePDFUri" value="/marsh/resource/MSIGMotorcycleInsurancePDS(with Commission).pdf" />
    <input type="hidden" name="emailUs" value="msig_online@my.msig-asia.com" />
    <input type="hidden" name="partnerUrlTitle" value="msigonline" />
    <!--<input type="hidden" name="isFPXPaymentGateway" value="${isFPXPaymentGateway}" />
    <input type="hidden" name="isBoostPaymentGateway" value="${isBoostPaymentGateway}" />-->
    <input type="hidden" name="originalModel99" value="" />
    <input type="hidden" name="originalModelIsInvalid" value="false" />
    <input type="hidden" name="originalModelFromNcd" value="" />
    <input type="hidden" name="modelInvalidButAllowed" value="18|99" /> <!--18|99-->
    <input type="hidden" name="isFpxPaymentGateway" value="false" />
    <input type="hidden" name="isBoostPaymentGateway" value="false" />
    <input type="hidden" name="formula" value="motor">
    <!-- <input type="hidden" name="partnerCode" value="msigonline"> -->
    <input type="hidden" name="partnerCode" value="sw">
    <input type="hidden" name="prefixMobile" value="${prefixMobile}" />
    <input type="hidden" name="isInIframe" value="${isInIframe}">
    <!-- <input type="hidden" name="productCode" value="MCY"> -->
    <input type="hidden" name="productCode" value="SWY">
    <input type="hidden" name="productName" value="Motorcycle">
    <input type="hidden" name="productGroup" value="${product.getProductGroup()}" />
    <input type="hidden" name="certificateNo" value="$!esc.html($!request.getParameter('certificateNo'))"> 
    <input type="hidden" name="staffId" value="">
    <input type="hidden" name="staffRelationship" value="">
    <input type="hidden" name="branchCode" value="">
    <input type="hidden" name="supportTel" value="1800886744">
    <input type="hidden" name="supportTelLabel" value="1-800-88-6744">
    <input type="hidden" name="thankYouPageUrl" value="/payment-completed.html">
    <input type="hidden" name="registrationUrl" value="/motorcycle-registration.html">
    <input type="hidden" name="summaryUrl" value="/motorcycle-summary.html">
    <input type="hidden" name="paymentUrl" value="/motorcycle-payment.html">
    <input type="hidden" name="productMinAge" value="$product.getMinAge()" />
    <input type="hidden" name="productMinAgeUnit" value="year" />
    <input type="hidden" name="productMaxAge" value="$product.getMaxAge()" />
    <input type="hidden" name="productMaxAgeUnit" value="year" />
    <input type="hidden" name="maxCoverDuration" value="$product.getMaxCoverDuration()" />
    <input type="hidden" name="maxCoverDurationUnit" value="$product.getMaxCoverDurationUnit()" />
    {# <input type="hidden" name="coveragePlan" #if($!{request.getParameter('coveragePlan')}) value="$!esc.html($!{request.getParameter('coveragePlan')})" #else value="Basic" #end/> #}
    <input type="hidden" name="coveragePremiumRate" value="$product.getNormalRate()" />
    <input type="hidden" name="coveragePremiumUpgradeRate" value="$product.getUpgradeRate()" />
    {# #if ($product.getIsSeasonal().equals("Y"))
        <input type="hidden" name="coveragePremiumType" value="promotion" />
    #else
        <input type="hidden" name="coveragePremiumType" value="default" />
    #end #}
    <!--<input type="hidden" name="commissionRate" value="$product.commissionRate" />-->
    <!--<input type="hidden" name="partnerName" value="$partner.partnerName" />-->
    <input type="hidden" name="commissionRate" value="10" />
    <input type="hidden" name="partnerName" value="Testing Partner Name" />
    
    <div id="tnc-modal" class="modal fade variant-tnc">
        <div class="modal-dialog partial-screen-modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-w">
                    <button class="modal-header-btn button-icon btn-close" data-dismiss="modal">
                        <svg class="icon icon-s">
                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-close-popup"
                                href="/spa-assets/icons/icons.svg#sprite-close-popup"></use>
                        </svg>
                    </button>
                </div>
                <div class="py-5 px-4 content-container">
                    <p><strong>Terms and Conditions</strong></p>
                    <p><br>You hereby acknowledge that you have read the Terms of Use, Product Disclosure Sheet and understood the policy terms and conditions stated in the master policy and wish to proceed with the purchase of this policy.</p>
                    <p>You must take reasonable care not to misrepresent when answering questions herein or in any request made by MSIG and check the information you have provided is complete and accurate. You should also disclose all relevant information which may influence MSIG in the acceptance of this insurance, decide the terms and the premium you will pay. If you do not take reasonable care and the information provided by you is incomplete or inaccurate, this may affect your claim. Your responsibility to provide complete and accurate information when requested by MSIG shall continue until the time of you entering into, making changes to or renewing your insurance. Unless renewed, the coverage will cease on expiry date and we shall strictly not be liable for any expenses that take place after the expiry date.</p>
                    <p>With respect to personal information submitted herein, you hereby consent to MSIG to process your personal information for the purpose of processing your application herein. Where applicable, you also confirm that you have obtained the consent from the person(s) named herein and that you are duly authorized to disclose their personal information herein. For more information our Privacy Policy, please read our Terms of Use.&nbsp;Kindly read our Privacy Notice at<a href="https://www.msig.com.my/privacy-notice/" target="_blank" class="donFunction">www.msig.com.my </a>for details.<br><br><strong>Tax Clause&nbsp;</strong><br><br>You are obligated to pay any applicable taxes (which include but not limited to service tax and stamp duty) imposed by the Malaysian tax authorities in relation to this Policy, with effective from 1<sup>st</sup> September 2018.</p>
                </div>
            </div>
        </div>
    </div>

    {% verbatim %}
        <div class="bg-w" v-if="canProceed">
            <div class="container py-4 py-md-5">
                <h1>Motorcycle Insurance</h1>
                <!-- Steppers -->
                <div class="nav variant-steppers">
                    <div :class="{
                        'nav-item step': true,
                        'current': currStep == step,
                        'completed': step.completed
                    }" v-for="step in steps" v-bind:key="steps.indexOf(step)">
                        <div class="step-indicator">
                            <span>
                                {{ step.stepNum }}
                            </span>
                            <svg class="icon icon-s tick-mark">
                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark" href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                            </svg>
                        </div>
                        <div class="step-title">{{ step.title }}</div>
                    </div>
                </div>
                <!-- Steppers -->
            </div>
        </div>

        <div class="bg-p2d pt-5 wizard-sections position-relative" v-if="canProceed">
            <validation-observer v-slot="observer" ref="form">
                <form @submit.prevent="observer.handleSubmit(onSubmit)">
                    <fieldset class="wizard-section-1" v-if="currStep && currStep.stepNum === '1'">
                        <div class="container">
                            <div class="bg-w py-5 px-md-5 px-3 mx-md-2" v-if="steps[0].showStaffVerification">
                                <p>Please fill in your Staff ID before proceed</p>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <validation-provider slim rules="required" v-slot="validator">
                                            <div class="form-group">
                                                <input type="text" 
                                                    :class="{ 'form-control': true, 'is-invalid': validator.errors.length > 0 }"
                                                    placeholder="XXXXXX"
                                                    v-uppercase
                                                    v-model="staffId"
                                                    v-on:keydown.enter.prevent="verifyStaffID">
                                                <div class="invalid-feedback font-italic">Complete the Staff ID Field</div>
                                            </div>    
                                        </validation-provider>
                                        <div :class="{ 'invalid-feedback font-italic': true, 'd-block': staffIDInvalid }">Oops! We couldn't find the Staff ID you entered. Please enter a correct one to proceed.</div>
                                    </div>
                                </div>
                            </div>

                            <!--wj -staff relationship select -->
                            <div class="bg-w py-5 px-md-5 px-3 mx-md-2" v-if="(steps[0].hasStaffBefore && !steps[0].showStaffVerification && !steps[0].staffRelationshipSelect)">
                                <p>This insurance plan is for:</p>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <validation-provider rules="required" v-slot="validator">
                                            <div class="form-group">
                                                <select :class="{
                                                    'form-control': true,
                                                    'is-invalid': staffRelationshipInvalid}"
                                                    v-model="staffRelationship"
                                                    v-on:change="staffRelationshipChange()">
                                                    <!-- original code - validator.errors.length > 0 && validator.touched -->
                                                    <option value="" disabled="" selected="">Please choose</option>
                                                    <!-- <option value="Myself">Myself</option>
                                                    <option value="My spouse">My spouse</option>
                                                    <option value="My parents">My parents</option>
                                                    <option value="My children">My children</option>
                                                    <option value="My siblings">My siblings</option>
                                                    <option value="My siblings in law">My siblings in law</option>
                                                    <option value="My parents in law">My parents in law</option>
                                                    <option value="My grandparents">My grandparents</option>
                                                    <option value="My grandparents in law">My grandparents in law</option>
                                                    <option value="My relatives">My relatives</option>
                                                    <option value="My friends">My friends</option> -->
                                                    <option v-for="stf in staff_relations" v-bind:value="stf.relationshipName">{{ stf.relationshipName }}</option>
                                                </select>
                                                <!--<div class="invalid-feedback font-italic">* Complete the relationship field.</div>-->
                                            </div>
                                        </validation-provider>
                                        <div :class="{ 'invalid-feedback font-italic': true, 'd-block': staffRelationshipInvalid }">* Complete the relationship field.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--wj -staff relationship select end-->

                            <!--wj -staff relationship select -->
                            <div class="bg-w py-5 px-md-5 px-3 mx-md-2" v-if="!steps[0].showStaffVerification && (steps[0].staffRelationshipSelect || !steps[0].hasStaffBefore)">
                            <!--wj -staff relationship select end-->
	                            <h2 class="p2">Get Started</h2>

                                <div class="bt2 mt-4" v-if="steps[0].showPrescreen">
                                    <p>
                                        Please make sure you meet the following conditions:
                                    </p>
                                    <ol class="pl-3">
                                        <li>You are between 16 and 75 years old.</li>
                                        <li>Your Motorcycle is 250 c.c and below.</li>
                                        <li>Your Motorcycle sum insured does not exceed RM30,000.</li>
                                        <li>Your Motorcycle is not older than 15 years old (Comprehensive Cover) or 40 years old (Third Party Cover).</li>
                                        <li>Your next policy renewal date is within 60 days.</li>
                                    </ol>
                                </div>

                                <div class="row mt-4 pt-2" v-if="!steps[0].showPrescreen">
                                    <div class="col-md-6 col-lg-4 col-12">
                                        <div class="d-flex mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" 
                                                    type="radio"
                                                    name="id_type"
                                                    value="nric"
                                                    id="id_type1"
                                                    v-model="formData['1'].policyHolderIdType">
                                                <label class="form-check-label" for="id_type1">NRIC No.:</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input"
                                                    type="radio"
                                                    name="id_type"
                                                    value="passport"
                                                    id="id_type2"
                                                    v-model="formData['1'].policyHolderIdType">
                                                <label class="form-check-label" for="id_type2">Passport No.:</label>
                                            </div>
                                        </div>

                                        <div class="d-flex flex-column">
                                            <validation-provider v-slot="validator" :rules="{ required: !isIdNric }">
                                                <div class="form-group" v-if="!isIdNric">
                                                    <select :class="{
                                                        'form-control': true,
                                                        'is-invalid': validator.errors.length > 0
                                                    }" v-model="formData['1'].country">
                                                        <option disabled hidden selected value="">Select Country</option>
                                                        <option v-for="country in countries"
                                                            v-bind:key="countries.indexOf(country)"
                                                            :value="country.code">
                                                            {{ country.name }}
                                                        </option>
                                                    </select>
                                                    <div class="invalid-feedback font-italic">
                                                        <span>* Complete the country field.</span>
                                                    </div>
                                                </div>
                                            </validation-provider>
                                            <validation-provider v-slot="validator"
                                                :rules="{
                                                    'required': true,
                                                    'nricValidDob': isIdNric,
                                                    'nricAge18AndAbove': isIdNric,
                                                    'min': isIdNric && {
                                                        length: 14
                                                    }
                                                }">
                                                <div class="form-group">
                                                    <input type="text"
                                                        :class="{
                                                            'form-control': true,
                                                            'is-invalid': validator.errors.length > 0
                                                        }"
                                                        :name="isIdNric ? 'NRIC' : 'Passport'"
                                                        :placeholder="isIdNric ? 'E.g.: 900808-10-8888' : 'E.g.: A98765432'"
                                                        v-mask="isIdNric ? '######-##-####' : 'XXXXXXXXXXXXXX'"
                                                        v-model="formData['1'].policyHolderNric"
                                                        autocomplete="off">
                                                    <div class="invalid-feedback font-italic">
                                                        <span v-if="validator.failedRules.required">* Complete the {{ isIdNric ? 'NRIC' : 'Passport' }} field.</span>
                                                        <span v-else-if="validator.failedRules.nricValidDob || validator.failedRules.min">Please check NRIC number</span>
                                                        <span v-else-if="validator.failedRules.nricAge18AndAbove">Min age for main policyholder is 16.</span>
                                                    </div>
                                                </div>
                                            </validation-provider>
                                            
                                        </div>
                                    </div>

                                    <div class="col-md-6 col-12">
                                        <!-- Don't change this value as this is for their CMS -->
                                        <p class="bt1 mt-1" style="margin-bottom: .825rem">Motorcycle Registration No.:</p>
                                        <div class="row">
                                            <div class="col-12 col-lg-6">
                                                <validation-provider v-slot="validator" rules="required">
                                                    <div class="form-group">
                                                        <input type="text"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            placeholder="E.g.: WA888A"
                                                            name='Vehicle Registration No.'
                                                            v-uppercase
                                                            v-mask="'XXXXXXXXXX'"
                                                            v-model="formData['1'].motorRegistrationNo">
                                                        <div class="invalid-feedback">
                                                            {{ validator.errors[0] }}
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bt2 mt-4 pt-2" v-if="!steps[0].showPrescreen">
                                    <validation-provider v-slot="validator" rules="mustBeTrue">
                                        <div class="form-check">
                                            <input type="checkbox"
                                                name="agreement"
                                                id="agreement"
                                                :class="{
                                                    'form-check-input': true,
                                                    'is-invalid': validator.errors.length > 0
                                                }"
                                                v-model="formData['1'].agreement">
                                            <label for="agreement" class="form-check-label">
                                                I have read and understood MSIG's <a target="_blank" href="https://www.msig.com.my/privacy-notice/" class="underline">Privacy Notice</a>, and
                                                agree to MSIG
                                                processing my personal data for the purposes and in the manners set out in the Privacy
                                                Notice.
                                            </label>
                                            <svg class="icon icon-m tick-mark">
                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                            </svg>
                                            <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                                * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                            </div>
                                        </div>
                                    </validation-provider>
                                </div>
                            </div>
                        </div>
                        <!-- wj - m3pa fixes: button positioning in IE -->
                        <div class="container pt-4 wizard-navigation d-flex flex-column flex-md-row" style="justify-content:flex-start;">
                            <template v-if="steps[0].showStaffVerification">
                                <a :href="'/' + partnerCode + '/products'" 
                                    class="btn btn-default btn-outline-primary order-1 order-md-0"
                                    style="margin-left:auto;">
                                    Back</a>
                                <a href="#" role="button"
                                    class="btn btn-default btn-primary mb-3 mb-md-0"
                                    @click.prevent="verifyStaffID">
                                    Continue
                                </a>
                            </template>
                            <!-- wj - add staff relationship -->
                            <template v-else-if="(steps[0].hasStaffBefore && !steps[0].showStaffVerification && !steps[0].staffRelationshipSelect)">
                                <a :href="'/' + partnerCode + '/#prescreen'"
                                    @click.prevent="staffRelationshipBack"
                                    class="btn btn-default btn-outline-primary order-1 order-md-0"
                                    style="margin-left:auto;">
                                    Back
                                </a>
                                <a href="#" role="button"
                                    class="btn btn-default btn-primary mb-3 mb-md-0"
                                    @click.prevent="verifyStaffRelationship">
                                    Continue
                                </a>
                            </template>
                            <!-- wj - add staff relationship end -->
                            <template v-else>
                                <!-- wj - add staff relationship -->
                                <a href="#"
                                    v-if="!steps[0].showStaffVerification && steps[0].staffRelationshipSelect && steps[0].showPrescreen"
                                    role="button"
                                    class="btn btn-default btn-outline-primary order-1 order-md-0"
                                    @click.prevent="backToRelationship"
                                    style="margin-right:auto;">Back</a>
                                    <!-- wj - m3pa fixes: button positioning in IE -->
                                <!-- wj - add staff relationship end -->
                                <a @click="canProceed = false"
                                    class="btn btn-default btn-outline-primary order-1 order-md-0"
                                    v-if="steps[0].showPrescreen"
                                    style="margin-left:auto;">No</a>
                                    <!-- wj - m3pa fixes: button positioning in IE -->
                                <a href="#" 
                                    role="button"
                                    class="btn btn-default btn-primary mb-3 mb-md-0"
                                    v-if="steps[0].showPrescreen"
                                    @click.prevent="setPrescreen(false)">
                                    Yes</a>
                                <a class="btn btn-default btn-outline-primary order-1 order-md-0" 
                                    @click.prevent="setPrescreen(true)"
                                    v-if="!steps[0].showPrescreen"
                                    style="margin-left:auto;">Back</a>
                                    <!-- wj - m3pa fixes: button positioning in IE -->
                                <a href="#"
                                    @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() });"
                                    class="btn btn-default btn-primary mb-3 mb-md-0" 
                                    v-if="!steps[0].showPrescreen">
                                    Continue
                                </a>
                            </template>
                        </div>
                    </fieldset>
                    
                    <fieldset class="wizard-section-2" v-if="currStep && currStep.stepNum === '2'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-lg-8">
                                    <div class="bg-w py-5 px-4 mb-4">
                                        <div class="d-flex">
                                            <h2 class="p2 mb-4">Motorcycle Details</h2>
                                        </div>

                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Motorcycle Make:</label>
                                                    <input disabled type="text" v-model="formData['2'].make" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Motorcycle Model: </label>
                                                        <!-- originalModelIsInvalid: {{originalModelIsInvalid}}-->
                                                        <!-- weijun - motorcycle model 99 -->
                                                        <!-- Shown when code NOT matches X -->
                                                        <!--remember to change the MODEL CODE to 99 ,33 test-->
                                                        <!--<label v-if="originalModelIsInvalid">terbalik not false should be true</label>
                                                        <label v-if="!originalModelIsInvalid">terbalik true should be true</label>-->
                                                    <input v-if="originalModelIsInvalid !== true" id="motorModelInput" type="text" disabled :value="formData['2'].family" disabled class="form-control">
                                                        <!-- Shown when code matches X, allow user to choose -->
                                                        <!-- If user select here, it will also change the value above -->
                                                        <!--remember to change the MODEL CODE to 99-->
                                                    <!--select v-if="(originalModel99)" v-on:click="filter" id="motorModelSelect" :value="formData['2'].family" class="form-control" 
                                                    @change="motorSelection($event);updateCcVariant($event)"-->
                                                    <select v-if="originalModelIsInvalid === true" id="motorModelSelect"  v-on:click="filter" v-model="formData['2'].modelAndFamily" class="form-control" 
                                                    @change="motorSelection($event);updateCcVariant($event)">
                                                        <option disabled hidden selected value="0">Select model</option>
                                                            <!--
                                                            <option v-for="allModel in allModelsByMake" :value="allModel.modelDescription">
                                                                {{ allModel.modelDescription }}
                                                            </option>
                                                            -->
                                                        <option style="display:none" v-for="allModel in allModelsByMake" :value="allModel.modelCode + '|' + allModel.modelDescription"
                                                            :name="allModel.modelCode">
                                                            <span>{{ allModel.modelDescription }}</span>
                                                        </option>
                                                    </select>
                                                    <small id="motorModelError" class="error-message text-primary font-italic" style="display:none;">
                                                        * Complete the Motorcycle Model field.
                                                    </small>
                                                    <!-- wj - motorcycle model 99 END -->
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Year of Manufacture:</label>
                                                    <input type="text" disabled v-model="formData['2'].motorYearOfMake" class="form-control">
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Variant:</label>
                                                        <select :class="{ 'form-control': true, 'is-invalid': validator.errors.length > 0 }" 
                                                            v-model="formData['2'].motorModel" @change="handleMotorModelChanged"
                                                            name="motorVariant" id="motorVariant">
                                                            <option disabled hidden selected value="0">Select Variant</option>
                                                            <option v-for="model in allModelVariants" :value="model">
                                                                <!--{{ model.variant }} {{ model.style }} {{ model.seat }} SEAT {{ model.transmission }}-->
                                                                    {{ model.variant }} {{ model.style }} {{model.engine}} {{ model.seat }} SEAT {{ model.transmission }}
                                                            </option>
                                                        </select>
                                                        <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                            * Complete the Motorcycle Location field.
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-2">Motorcycle Location:</p>
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <select :class="{ 'form-control': true, 'is-invalid': validator.errors.length > 0 }" 
                                                            @change="handleMotorcycleLocationChanged" id="motorcycleLocation"
                                                            v-model="formData['2'].motorVehicleLocation" :disabled="originalModelIsInvalid == true && !formData['2'].motorModel">
                                                            <option disabled hidden selected value="">Select State</option>
                                                            <option v-for="state in states" :key="state.code" :value="state">{{ state.name }}</option>
                                                        </select>
                                                        
                                                        <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                            * Complete the Motorcycle Location field.
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Sum Insured Value:</label>
                                                    <select :class="{ 'form-control': true, 'no-value': !formData['2'].sumInsuredType }" 
                                                        v-model="formData['2'].sumInsuredType"
                                                        :disabled="partnerCode === 'msigonline'">
                                                        <option value="" disabled selected hidden>Estimated Value</option>
                                                        <option value="marketValue">Market Value</option>
                                                        <option value="recomendedValue">Recommended Value</option> 
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Cubic Capacity:</label>
                                                    <select class="form-control" 
                                                        v-model="formData['2'].motorCc"
                                                        @change="handleCcChanged"
                                                        name="motorCc">
                                                        <option disabled selected value="0">Select cc</option>-
                                                        <option v-for="ccVariant in allCcVariants" 
                                                            v-bind:key="allCcVariants.indexOf(ccVariant)" 
                                                            :value="ccVariant">
                                                            {{ ccVariant }}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>


                                            <div class="col-12 col-md-6">
                                                
                                                <div class="form-group variant-icon variant-autocomplete">
                                                    <label class="bt1">Loan Provider (Optional):</label>
                                                    <vue-typeahead-bootstrap
                                                        :data="loanProviderSuggestions"
                                                        v-model="formData['2'].motorLoanProvider"
                                                        :serializer="function(s) { return s.financeName }"
                                                        placeholder="Find Loan Provider"
                                                        :max-matches="5"
                                                        @hit="handleLoanProviderHit($event)"
                                                    >
                                                        <template v-slot:append>
                                                            <svg class="icon icon-s mr-2">
                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                    href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                            </svg>
                                                        </template>
                                                    </vue-typeahead-bootstrap>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-w py-5 px-4 mb-4">
                                        <div class="d-flex">
                                            <h2 class="p2 mb-4">Rider Details</h2>
                                        </div>
                                        
                                        <div class="row" v-if="!isIdNric">
                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">Country:</label>
                                                    <input disabled type="text" :value="findCountryByCode(formData['1'].country).name" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|validName" v-slot="validator">
                                                    <div class="form-group">
                                                        <!-- wj - passport label -->
                                                        <label v-if="formData['1'].policyHolderIdType === 'nric'" class="bt1">Name (as per NRIC):</label>
                                                        <label v-if="formData['1'].policyHolderIdType === 'passport'" class="bt1">Name (as per Passport):</label>
                                                        <input type="text"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['2'].policyHolderName"
                                                            placeholder="E.g.: Lee Siew Suan">
                                                        <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">* Complete the Name as per NRIC field.</span>
                                                            <span v-else-if="validator.failedRules.validName">Please enter only alphabet, "-", "@", "/" and " ' " for Name</span>
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group" v-if="isIdNric">
                                                    <label class="bt1">NRIC No.:</label>
                                                    <input type="text" 
                                                        class="form-control"
                                                        v-model="formData['1'].policyHolderNric"
                                                        placeholder="E.g.: 900808-10-8888"
                                                        disabled
                                                        v-mask="'######-##-####'">
                                                </div>
                                                <div class="form-group" v-if="!isIdNric">
                                                    <label class="bt1">Passport No.:</label>
                                                    <input type="text" 
                                                        class="form-control"
                                                        v-model="formData['1'].policyHolderNric"
                                                        placeholder="E.g.: A98765432"
                                                        disabled>
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|email" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1 d-flex">
                                                            Email: 
                                                            <span>
                                                                <div class="ml-2 btn-tooltip"
                                                                    data-toggle="tooltip"
                                                                    data-placement="right"
                                                                    title="Email address provided should be the insured's email address. Future email communications regarding this policy will be sent to the email submitted. For policy renewal, kindly use the email address that is tied to your existing policy.">
                                                                    ?
                                                                </div>
                                                            </span>
                                                        </label>
                                                        <input type="text" 
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['2'].policyHolderEmail"
                                                            placeholder="E.g.: you@gmail.com">
                                                        <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">* Complete the Email field.</span>
                                                            <span v-else-if="validator.failedRules.email">Please enter a valid email address</span>
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|mobileNumber" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Mobile No.:</label>
                                                        <input type="tel"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-mask="'###-### #####'"
                                                            v-model="formData['2'].policyHolderMobileNo"
                                                            placeholder="E.g.: 018-123 4567">
                                                        <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">* Complete the Mobile field.</span>
                                                            <span v-else-if="validator.failedRules.mobileNumber">Please check mobile number.</span>
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6" v-if="!isIdNric">
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Gender:</label>
                                                        <select v-model="policyHolderGender" 
                                                            :disabled="isIdNric"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }">
                                                            <option value="" disabled selected hidden>Select Option</option>
                                                            <option value="M">Male</option>
                                                            <option value="F">Female</option>
                                                        </select>
                                                        <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Gender field.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>
                                            
                                            <!-- wj - dob -->
                                            <div class="col-12 col-md-6" v-if="!isIdNric">
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Date of Birth:</label>
                                                        <datepicker
                                                            v-model="formData['2'].policyHolderDateOfBirth"
                                                            :input-class="{
                                                                'form-control bg-white': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            placeholder="DD/MM/YYYY"
                                                            calendar-button-icon
                                                            :disabled-dates="disabledDates"
                                                            :open-date="openDate"
                                                            format="dd/MM/yyyy"
                                                            v-mask="'##/##/####'"
                                                        ></datepicker>
                                                        <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Date of Birth field.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label class="bt1">Address:</label>
                                                        <input type="text"
                                                            placeholder="First Line"
                                                            v-model="formData['2'].policyHolderAddressLine1"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }">
                                                        <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                            * Complete the Address field.
                                                        </small>
                                                    </div>
                                                </validation-provider>
                                                <div class="form-group">
                                                    <input type="text"
                                                        placeholder="Second Line"
                                                        class="form-control"
                                                        v-model="formData['2'].policyHolderAddressLine2">
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <validation-provider rules="required|min:5|max:5|integer" v-slot="validator" ref="postcode1">
                                                    <div class="form-group variant-icon variant-autocomplete" @click.once="$refs.postcode1.validate()">
                                                        <label class="bt1">Postcode:</label>
                                                        <vue-typeahead-bootstrap
                                                            v-model="formData['2'].addressPostcode"
                                                            :data="postcodeSuggestions"
                                                            :serializer="function (s) { return s.postcode }"
                                                            placeholder="Find postcode"
                                                            :max-matches="5"
                                                            :input-class="validator.errors.length > 0 ? 'is-invalid' : ''"
                                                            @hit="handlePostcodeHit($event)"
                                                            maxlength="5"
                                                            v-mask="'#####'"
                                                        >
                                                            <template v-slot:append>
                                                                <svg class="icon icon-s mr-2">
                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                        href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                                </svg>
                                                            </template>
                                                        </vue-typeahead-bootstrap>
                                                        <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Postcode field.
                                                            </span>
                                                            <span v-else-if="validator.failedRules.min || validator.failedRules.max || validator.failedRules.integer">
                                                                Please enter a valid Postcode.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">City:</label>
                                                    <input type="text" 
                                                        disabled="disabled"
                                                        placeholder="City"
                                                        v-model="formData['2'].addressCity"
                                                        class="form-control">
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <div class="form-group">
                                                    <label class="bt1">State:</label>
                                                    <input type="text"
                                                        disabled="disabled"
                                                        placeholder="State"
                                                        v-model="formData['2'].addressState"
                                                        class="form-control">
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6" v-if="isIdNric">
                                                <div class="form-group">
                                                    <label class="bt1">Gender:</label>
                                                    <select v-model="policyHolderGender" 
                                                        disabled
                                                        class="form-control">
                                                        <option value="" disabled selected hidden>Select Option</option>
                                                        <option value="M">Male</option>
                                                        <option value="F">Female</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-2">Marital Status:</p>
                                                <validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <select v-model="formData['2'].policyHolderMaritalStatus"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }">
                                                            <option disabled="disabled" hidden="hidden" selected="selected" value="">
                                                                Select Option
                                                            </option>
                                                            <option value="Single">Single</option>
                                                            <option value="Married">Married</option>
                                                        </select>
                                                        <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Marital Status field.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>
                                            </div>

                                            <div class="col-12 col-md-6">
                                                <!--
												<validation-provider rules="required" v-slot="validator">
                                                    <div class="form-group">
                                                        <label for="occupation" class="bt1">Occupation:</label>
                                                        <input id="occupation"
                                                            type="text"
                                                            placeholder="E.g.: Architect"
                                                            :class="{
                                                                'form-control': true,
                                                                'is-invalid': validator.errors.length > 0
                                                            }"
                                                            v-model="formData['2'].policyHolderOccupation">
                                                        <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Occupation field.
                                                            </span>
                                                        </div>
                                                    </div>
                                                </validation-provider>-->
												
                                                <validation-provider rules="required|validOccupation" v-slot="validator">
													<div class="form-group variant-icon variant-autocomplete">
                                                         <label class="bt1">Occupation:</label>
                                                         <vue-typeahead-bootstrap
                                                             :data="occupationSuggestions"
                                                             v-model="formData['2'].policyHolderOccupation"
                                                             :serializer="function(s) { return s.tieList }"
                                                             :max-matches="3"
                                                             :input-class="validator.errors.length > 0 ? 'is-invalid' : ''"
                                                             placeholder="Find Occupation"
                                                             @hit="handleOccupationHit($event)"
                                                         >
                                                             <template slot="append">
                                                                 <svg class="icon icon-s mr-2">
                                                                     <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                         href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                                 </svg>
                                                             </template>
                                                         </vue-typeahead-bootstrap>
                                                         <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                            <span v-if="validator.failedRules.required">
                                                                * Complete the Occupation field.
                                                            </span>
                                                            <span v-if="validator.failedRules.validOccupation">
                                                                * Please enter alphabets only.
                                                            </span>
                                                         </div>     
                                                   </div>
                                                </validation-provider>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="pt-4 wizard-navigation d-none d-md-flex">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary">Continue</a>
                                    </div>
                                </div>

                                <div class="col-12 col-lg-4">
                                    <motor-summary-pane 
                                        :curr-step-num="currStep.stepNum"
                                        :form-data="formData"
                                    ></motor-summary-pane>
                                </div>
                            </div>
                        </div>
                        <div class="container pt-4 wizard-navigation d-md-none">
                            <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary mb-3 mb-md-0">Continue</a>
                            <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary ">Back</a>
                        </div>
                    </fieldset>

                    <fieldset class="wizard-section-3" v-if="currStep && currStep.stepNum === '3'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-lg-8">
                                    <div class="bg-w py-4 px-4 mb-3">
                                        <!-- Plan Selection Boxes -->
                                        <h2 class="p2 mb-4 mt-3">Please Select Your Preferred Plan</h2>
                                        <div class="selection-infobox-group row motorcycle-selection">
                                            <div class="col-12 ">
                                                <div class="d-md-flex mx-md-n2">

                                                    <div class="selection-infobox has-recommended px-md-2">
                                                        <label class="d-block">
                                                            <strong class="flag-recommended text-center d-block py-2">
                                                                <svg class="icon">
                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-star"
                                                                        href="/spa-assets/icons/icons.svg#sprite-star"></use>
                                                                </svg>
                                                                <span>Recommended</span>
                                                            </strong>
                                                            <input @change="handlePlanTypeChange"
                                                                type="radio" 
                                                                v-model="formData['3'].motorPlanType" 
                                                                value="comprehensive" />
                                                            <div class="box overflow-hidden">
                                                                <div class="header-match-height">
                                                                    <div class="box--header bg-p2 text-white p-3">
                                                                        <h3 class="m-0">Comprehensive <br class="d-none d-lg-block" /> Motorcycle Insurance</h3>
                                                                    </div>
                                                                    <div class="mt-4 mb-3">
                                                                        <svg class="icon icon-7xl ">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-motorcycle"
                                                                                href="/spa-assets/icons/icons.svg#sprite-motorcycle">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                                <div class="box--body px-3 pt-0 pb-3">
                                                                    <ul class="list variant-icon mb-0 row-match-height" data-row-num="1">

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold ">Third party cover</span>
                                                                            </div>
                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold">Accidental Fire &amp; Theft</span>
                                                                            </div>
                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold ">Loss or damage to your motorcycle</span>
                                                                            </div>
                                                                        </li>
                                                                    </ul>

                                                                    <div class="d-flex justify-content-center py-2">
                                                                        <div class="custom-rounded-checked">
                                                                            <svg class="icon icon-m tick-mark my-2">
                                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                </use>
                                                                            </svg>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </label>
                                                    </div>

                                                    <div class="selection-infobox px-md-2 pt-3 pt-md-0">
                                                        <label class="d-block">
                                                            <strong class="flag-recommended text-primary text-center d-none d-md-block py-2 invisible">
                                                                <svg class="icon">
                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-star"
                                                                        href="/spa-assets/icons/icons.svg#sprite-star"></use>
                                                                </svg>
                                                                <span></span>
                                                            </strong>
                                                            <input @change="handlePlanTypeChange" type="radio" v-model="formData['3'].motorPlanType" value="m3pa" />
                                                            <div class="box overflow-hidden">
                                                                <div class="header-match-height">
                                                                    <div class="box--header bg-p2 text-white p-3">
                                                                        <h3 class="m-0">Motorcycle 3PA <br class="d-none d-md-block" /> Insurance</h3>
                                                                    </div>
                                                                    <div class="mt-4 mb-3">
                                                                        <svg class="icon icon-7xl ">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-motorcycle-bang"
                                                                                href="/spa-assets/icons/icons.svg#sprite-motorcycle-bang">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                                <div class="box--body px-3 pt-0 pb-3">


                                                                    <ul class="list variant-icon mb-0 row-match-height" data-row-num="1">
                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center">

                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold ">Third party cover</span>
                                                                            </div>

                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center">
                                                                            <div class="list-icon">
                                                                                <svg class="icon icon-s">
                                                                                    <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                        href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                    </use>
                                                                                </svg>
                                                                            </div>
                                                                            <div class="list-content d-flex justify-content-between d-lg-block w-100 text-left ml-md-4">
                                                                                <span class="bold">Personal accident cover for policyholder </span>
                                                                            </div>
                                                                        </li>

                                                                        <li class="mb-2 row-match-height pl-lg-0 text-lg-center">
                                                                        </li>
                                                                    </ul>

                                                                    <div class="d-flex justify-content-center py-2">
                                                                        <div class="custom-rounded-checked">
                                                                            <svg class="icon icon-m tick-mark my-2">
                                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                                </use>
                                                                            </svg>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </label>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- Plan Selection Boxes -->

                                        <!-- Checkboxes for add-ons -->
                                        <div class="check-list-container" v-if="formData['3'].motorPlanType === 'm3pa'">
                                            <div class="d-flex mt-5">
                                                <h2 class="p2 mb-0">Packaged Add-On</h2>
                                            </div>
                                            <div class="checkbox-list mb-5 mt-4">
                                                <div class="d-flex align-items-center">
                                                    <span>
                                                        <svg class="icon icon-s tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </span>
                                                    <p class="bt2 ml-3 mb-0 font-weight-bold">Rider’s Personal Accident (Non-Tariff)</p>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="auto"
                                                            title="Get covered against death or permanent disablement resulting from a road accident whilst using the insured motorcycle. In the event of death of the policyholder or authorised rider from an accident, we will pay a bereavement allowance.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="check-list-container">
                                            <div class="d-flex mt-5 mb-4">
                                                <h2 class="p2">Choose Your Optional Add-On</h2>
                                            </div> 

                                            <div class="checkbox-list" v-if="formData['3'].motorPlanType === 'comprehensive'">
                                                <div class="d-flex align-items-md-center">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            id="motorAddRiderPA"
                                                            v-model="formData['3'].motorAddRiderPA"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="motorAddRiderPA" class="form-check-label bt2 pr-0">
                                                            Rider's Personal Accident (Non-Tariff)
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="auto"
                                                            title="Get covered against death or permanent disablement resulting from a road accident whilst using the insured motorcycle. In the event of death of the policyholder or authorised rider from an accident, we will pay a bereavement allowance.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div class="d-flex align-items-md-center">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            id="allRiderPlan"
                                                            v-model="formData['3'].allRiderPlan"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="allRiderPlan" class="form-check-label bt2 pr-0">
                                                            All Riders
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="auto"
                                                            title="Get covered against accidents that happen when your motorcycle is being used by a licensed rider who has your permission to use your motorcycle.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                                
                                                <div class="ml-4 pl-2 font-italic" v-if="!formData['3'].allRiderPlan">
                                                    <small class="color-red"><b>"You are choosing Single Rider coverage"</b></small>
                                                    <br>
                                                    <small class="color-red">Important Note: There will be no coverage in the event of your motorcycle ridden by any other person.</small>
                                                </div>
                                                <div class="ml-4 pl-2 font-italic" v-if="formData['3'].allRiderPlan">
                                                    <small><b>"You are choosing All Riders coverage"</b></small>
                                                    <br>
                                                    <small>Important Note: There will be personal accident cover for authorised riders.</small>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div :class="{
                                                    'd-flex align-items-md-center': true
                                                }">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            name="riot"
                                                            id="riot"
                                                            v-model="formData['3'].motorAddSRCC"
                                                            :disabled="formData['3'].motorPlanType === 'm3pa'"
                                                            @change="calculatePremiumAsync"
                                                            class="form-check-input">
                                                        <label for="riot" class="form-check-label bt2 pr-0">
                                                            Strike, Riot and Civil Commotion
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="auto"
                                                            title="Covers your motorcycle against damage caused by strike, riot and civil commotion.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div :class="{
                                                    'd-flex align-items-md-center': true
                                                }">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            name="motorAddSpecialPerils"
                                                            id="motorAddSpecialPerils"
                                                            v-model="formData['3'].motorAddSpecialPerils"
                                                            :disabled="formData['3'].motorPlanType === 'm3pa'"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="motorAddSpecialPerils" class="form-check-label bt2 pr-0">
                                                            Special Perils
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="auto"
                                                            title="We cover the cost to repair your motorcycle if it gets damaged by flood, storm, landslide, landslip or other covulsion of nature.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="checkbox-list my-4">
                                                <div class="d-flex align-items-md-center">
                                                    <div class="form-check">
                                                        <input type="checkbox"
                                                            name="motorAddLegalLiabilityToPillion"
                                                            id="motorAddLegalLiabilityToPillion"
                                                            v-model="formData['3'].motorAddLegalLiabilityToPillion"
                                                            class="form-check-input"
                                                            @change="calculatePremiumAsync">
                                                        <label for="motorAddLegalLiabilityToPillion" class="form-check-label bt2 pr-0">
                                                            Legal Liability to Pillion
                                                        </label>
                                                        <svg class="icon icon-m tick-mark">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                        </svg>
                                                    </div>
                                                    <span>
                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                            data-placement="auto"
                                                            title="Get covered against legal liability that your pillion might seek against you if you get into an accident.">
                                                            ?
                                                        </div>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Checkboxes for add-ons -->
                                    </div>

                                    <div class="pt-4 wizard-navigation d-none d-md-flex">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary">Continue</a>
                                    </div>
                                </div>

                                <div class="col-12 col-lg-4">
                                    <motor-summary-pane 
                                        :form-data="formData"
                                        :curr-step-num="currStep.stepNum"
                                    ></motor-summary-pane>
                                </div>
                            </div>
                        </div>
                        <div class="container pt-4 wizard-navigation d-md-none">
                            <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary mb-3 mb-md-0">Continue</a>
                            <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary ">Back</a>
                        </div>
                    </fieldset>

                    <fieldset class="wizard-section-4" v-if="currStep && currStep.stepNum === '4'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-lg-8">
                                    <div class="bg-w py-5 pb-3 px-4 mb-4">
                                        <h2 class="p2 mb-4">Motorcycle Details</h2>
                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Registration No.:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['1'].motorRegistrationNo }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['1'].motorRegistrationNo" disabled>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Make:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].make }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].make" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Model:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].family }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].family" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Year of Manufacture:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].motorYearOfMake }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].motorYearOfMake" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Variant:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].motorModel.variant }} {{ formData['2'].motorModel.style }} {{ formData['2'].motorModel.engine }} {{ formData['2'].motorModel.seat }} SEAT {{ formData['2'].motorModel.transmission }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" :value="formData['2'].motorModel.variant + ' ' + formData['2'].motorModel.style + ' ' + formData['2'].motorModel.engine + ' ' + formData['2'].motorModel.seat + ' SEAT ' + formData['2'].motorModel.transmission" disabled>
                                                </div>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Motorcycle Location:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].motorVehicleLocation.name }}</p>
                                                <template v-if="formData['4'].isMotorDetailsEditMode">
                                                    <validation-provider rules="required" v-slot="validator">
                                                        <div class="form-group">
                                                            <select :class="{ 'form-control': true, 'is-invalid': validator.errors.length > 0 }" 
                                                                @change="calculatePremiumAsync"
                                                                v-model="formData['4'].motorVehicleLocation">
                                                                <option disabled hidden selected value="">Select a state</option>
                                                                <option v-for="state in states" :key="state.code" :value="state">{{ state.name }}</option>
                                                            </select>
                                                            <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                                * Complete the Motorcycle Location field.
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </template>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Sum Insured Value:</p>
                                                <template v-if="formData['3'].motorPlanType === 'comprehensive'">
                                                    <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">
                                                        {{ formData['2'].sumInsuredType === 'marketValue' ? 'Market Value' : 'Recommended Value' }}
                                                    </p>
                                                    <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                        <input type="text" class="form-control" :value="formData['2'].sumInsuredType === 'marketValue' ? 'Market Value' : 'Recommended Value'" disabled>
                                                    </div>
                                                </template>
                                                <p class="bt2" v-else>Not Applicable</p>
                                            </div>
                                            <div class="col-12 col-md-6">
                                                <p class="bt1 mb-0">Cubic Capacity:</p>
                                                <p class="bt2" v-if="!formData['4'].isMotorDetailsEditMode">{{ formData['2'].motorCc }}</p>
                                                <div class="form-group" v-if="formData['4'].isMotorDetailsEditMode">
                                                    <input type="text" class="form-control" v-model="formData['2'].motorCc" disabled>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="d-flex justify-content-end" v-if="!formData['4'].isMotorDetailsEditMode">
                                            <a href="#"
                                                class="btn btn-secondary btn-icon"
                                                @click.prevent="formData['4'].isMotorDetailsEditMode = !formData['4'].isMotorDetailsEditMode">
                                                <div class="button-icon">
                                                    <svg class="icon icon-s">
                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-pencil-1"
                                                            href="/spa-assets/icons/icons.svg#sprite-pencil-1"></use>
                                                    </svg>
                                                </div>
                                                <span class="button-text">Edit</span>
                                            </a>
                                        </div>
                                        <div class="d-flex justify-content-end" v-if="formData['4'].isMotorDetailsEditMode">
                                            <a href="#"
                                                class="btn btn-primary btn-icon mr-3"
                                                @click.prevent="cancelEditMotorDetails">
                                                <div class="button-icon">
                                                    <svg class="icon icon-s">
                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-close"
                                                            href="/spa-assets/icons/icons.svg#sprite-close"></use>
                                                    </svg>
                                                </div>
                                                <span class="button-text">Cancel</span>
                                            </a>
                                            <a href="#"
                                                class="btn btn-secondary"
                                                @click.prevent="saveEditMotorDetails">
                                                <span class="button-text">Save</span>
                                            </a>
                                        </div>
                                    </div>

                                    <!-- #region Rider Details -->
                                    <validation-observer ref="editRiderObserver">
                                        <div class="bg-w py-5 pb-3 px-4 mb-4">
                                            <h2 class="p2 mb-4">Rider Details</h2>
                                            <div class="row">
                                                <!-- wj - country -->
                                                <div class="col-12 col-md-6">
                                                    <p class="bt1 mb-0" v-if="formData['1'].policyHolderIdType === 'passport'">Country:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ findCountryByCode(formData['1'].country).name }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <validation-provider v-slot="validator" :rules="{ required: !isIdNric }">
                                                            <div class="form-group" v-if="!isIdNric">
                                                                <select :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }" v-model="formData['1'].country"
                                                                disabled>
                                                                    <option disabled hidden selected value="">Select Country</option>
                                                                    <option v-for="country in countries"
                                                                        v-bind:key="countries.indexOf(country)"
                                                                        :value="country.code">
                                                                        {{ country.name }}
                                                                    </option>
                                                                </select>
                                                                <div class="invalid-feedback font-italic">
                                                                    <span>* Complete the country field.</span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                    </template>
                                                </div>

                                                <div class="col-12 col-md-6">
                                                </div>

                                                <div class="col-12 col-md-6">
                                                    <!-- wj - passport label -->
                                                    <p class="bt1 mb-0" v-if="formData['1'].policyHolderIdType === 'nric'">Name (as per NRIC):</p>
                                                    <p class="bt1 mb-0" v-if="formData['1'].policyHolderIdType === 'passport'">Name (as per Passport):</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['2'].policyHolderName }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <validation-provider rules="required|validName" v-slot="validator">
                                                            <div class="form-group">
                                                                <input type="text"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }"
                                                                    v-model="formData['4'].policyHolderName"
                                                                    placeholder="E.g. Lee Siew Suan">
                                                                <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">* Complete the Name as per NRIC field.</span>
                                                                    <span v-else-if="validator.failedRules.validName">Please enter only alphabet, "-", "@", "/" and " ' " for Name</span>
                                                                </small>
                                                            </div>
                                                        </validation-provider>
                                                    </template>
                                                </div>
                                                <div class="col-12 col-md-6">
                                                    <!-- wj - passport label -->
                                                    <p class="bt1 mb-0" v-if="formData['1'].policyHolderIdType === 'nric'">NRIC No.:</p>
                                                    <p class="bt1 mb-0" v-if="formData['1'].policyHolderIdType === 'passport'">Passport No.:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['1'].policyHolderNric }}</p>
                                                    <div class="form-group" v-if="formData['4'].isRiderDetailsEditMode">
                                                        <input type="text" class="form-control" v-model="formData['1'].policyHolderNric" disabled>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-md-6">
                                                    <p class="bt1 mb-0">Email:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['2'].policyHolderEmail }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <validation-provider rules="required|email" v-slot="validator">
                                                            <div class="form-group">
                                                                <input type="text" 
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }"
                                                                    v-model="formData['4'].policyHolderEmail"
                                                                    placeholder="E.g. 900808-10-8888">
                                                                <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">* Complete the Email field.</span>
                                                                    <span v-else-if="validator.failedRules.email">Please enter a valid email address</span>
                                                                </small>
                                                            </div>
                                                        </validation-provider>
                                                    </template>
                                                </div>
                                                <div class="col-12 col-md-6">
                                                    <p class="bt1 mb-0">Mobile No.:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['4'].policyHolderMobileNo }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <validation-provider rules="required|mobileNumber" v-slot="validator">
                                                            <div class="form-group">
                                                                <input type="tel"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }"
                                                                    v-model="formData['4'].policyHolderMobileNo"
                                                                    placeholder="E.g. 018-123 4567">
                                                                <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">* Complete the Mobile field.</span>
                                                                    <span v-else-if="validator.failedRules.integer || validator.failedRules.max">Please check mobile number.</span>
                                                                </small>
                                                            </div>
                                                        </validation-provider>
                                                    </template>
                                                </div>
                                                <div class="col-12 col-md-6">
                                                    <p class="bt1 mb-0">Address:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ fullAddress }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <!-- Address Line 1 -->
                                                        <validation-provider rules="required" v-slot="validator">
                                                            <div class="form-group">
                                                                <input type="text"
                                                                    placeholder="First Line"
                                                                    v-model="formData['4'].policyHolderAddressLine1"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }">
                                                                <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                                    * Complete the Address field.
                                                                </small>
                                                            </div>
                                                        </validation-provider>
                                                        
                                                        <!-- Address Line 2 -->
                                                        <div class="form-group">
                                                            <input type="text"
                                                                placeholder="Second Line"
                                                                class="form-control"
                                                                v-model="formData['4'].policyHolderAddressLine2">
                                                        </div>

                                                        <!-- Postcode -->
                                                        <validation-provider rules="required|min:5|max:5|integer" v-slot="validator">
                                                            <div class="form-group variant-icon variant-autocomplete">
                                                                <label class="bt1">Postcode:</label>
                                                                <vue-typeahead-bootstrap
                                                                    :data="postcodeSuggestions"
                                                                    v-model="formData['4'].addressPostcode"
                                                                    :serializer="function(s) { return s.postcode }"
                                                                    placeholder="Find postcode"
                                                                    :max-matches="5"
                                                                    :input-class="validator.errors.length > 0 ? 'is-invalid' : ''"
                                                                    @hit="handlePostcodeHit($event)"
                                                                    maxlength="5"
                                                                >
                                                                    <template slot="append">
                                                                        <svg class="icon icon-s mr-2">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                                href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                                        </svg>
                                                                    </template>
                                                                </vue-typeahead-bootstrap>
                                                                <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">
                                                                        * Complete the Postcode field.
                                                                    </span>
                                                                    <span v-else-if="validator.failedRules.min || validator.failedRules.max || validator.failedRules.integer">
                                                                        Please enter a valid Postcode.
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                        <div class="form-group">
                                                            <label class="bt1">City:</label>
                                                            <input type="text" 
                                                                disabled="disabled"
                                                                placeholder="city"
                                                                v-model="formData['2'].addressCity"
                                                                class="form-control">
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="bt1">State:</label>
                                                            <input type="text"
                                                                disabled="disabled"
                                                                placeholder="state"
                                                                v-model="formData['2'].addressState"
                                                                class="form-control">
                                                        </div>
                                                    </template>
                                                </div>

                                                <!-- wj - dob -->
                                                <div class="col-12 col-md-6" v-if="!isIdNric">
                                                    <p class="bt1 mb-0">Date of Birth:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ format_date(formData['2'].policyHolderDateOfBirth) }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <validation-provider rules="required" v-slot="validator">
                                                            <div class="form-group">
                                                                <datepicker
                                                                    v-model="formData['2'].policyHolderDateOfBirth"
                                                                    :input-class="{
                                                                        'form-control bg-white': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }"
                                                                    placeholder="DD/MM/YYYY"
                                                                    calendar-button-icon
                                                                    :disabled-dates="disabledDates"
                                                                    :open-date="openDate"
                                                                    format="dd/MM/yyyy"
                                                                    v-mask="'##/##/####'"
                                                                ></datepicker>
                                                                <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">
                                                                        * Complete the Date of Birth field.
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                    </template>
                                                </div>

                                                <div class="col-12 col-md-6">
                                                    <p class="bt1 mb-0">Gender:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ policyHolderGender === 'M' ? 'Male' : 'Female' }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <validation-provider rules="required" v-slot="validator">
                                                            <div class="form-group">
                                                                <select v-model="policyHolderGender" 
                                                                    :disabled="isIdNric"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }">
                                                                    <option value="" disabled selected hidden>Select Option</option>
                                                                    <option value="M">Male</option>
                                                                    <option value="F">Female</option>
                                                                </select>
                                                                <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">
                                                                        * Complete the Gender field.
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                        
                                                    </template>
                                                </div>
                                                <div class="col-12 col-md-6">
                                                    <p class="bt1 mb-0">Marital Status:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['4'].policyHolderMaritalStatus }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <validation-provider rules="required" v-slot="validator">
                                                            <div class="form-group">
                                                                <select v-model="formData['4'].policyHolderMaritalStatus"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }">
                                                                    <option disabled="disabled" hidden="hidden" selected="selected" value="">
                                                                        Select Option
                                                                    </option>
                                                                    <option value="Single">Single</option>
                                                                    <option value="Married">Married</option>
                                                                </select>
                                                                <div class="small error-message text-primary font-itatic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">
                                                                        * Complete the Marital Status field.
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                    </template>
                                                </div>
                                                <div class="col-12 col-md-6">
                                                    <p class="bt1 mb-0">Occupation:</p>
                                                    <p class="bt2" v-if="!formData['4'].isRiderDetailsEditMode">{{ formData['4'].policyHolderOccupation }}</p>
                                                    <template v-if="formData['4'].isRiderDetailsEditMode">
                                                        <!--<validation-provider rules="required" v-slot="validator">
                                                            <div class="form-group">    
                                                                <input id="occupation"
                                                                    type="text"
                                                                    placeholder="E.g.: Architect"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }"
                                                                    v-model="formData['4'].policyHolderOccupation">
                                                                <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">
                                                                        * Complete the Occupation field.
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>-->
                                                        
                                                        <validation-provider rules="required|validOccupation" v-slot="validator">
                                                            <div class="form-group variant-icon variant-autocomplete">
                                                                    <vue-typeahead-bootstrap
                                                                        :data="occupationSuggestions"
                                                                        v-model="formData['4'].policyHolderOccupation"
                                                                        :serializer="function(s) { return s.tieList }"
                                                                        :max-matches="3"
                                                                        :input-class="validator.errors.length > 0 ? 'is-invalid' : ''"
                                                                        placeholder="Find Occupation"
                                                                        @hit="handleOccupationHit($event)"
                                                                    >
                                                                        <template slot="append">
                                                                            <svg class="icon icon-s mr-2">
                                                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-search"
                                                                                    href="/spa-assets/icons/icons.svg#sprite-search"></use>
                                                                            </svg>
                                                                        </template>
                                                                    </vue-typeahead-bootstrap>
                                                                    <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                        <span v-if="validator.failedRules.required">
                                                                            * Complete the Occupation field.
                                                                        </span>
                                                                    </div>   
                                                            </div>
                                                        </validation-provider>
                                                    </template>
                                                </div>
                                            </div>

                                            <div class="d-flex justify-content-end" v-if="!formData['4'].isRiderDetailsEditMode">
                                                <a href="#" @click.prevent="formData['4'].isRiderDetailsEditMode = true" class="btn btn-secondary btn-icon">
                                                    <div class="button-icon">
                                                        <svg class="icon icon-s">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-pencil-1"
                                                                href="/spa-assets/icons/icons.svg#sprite-pencil-1"></use>
                                                        </svg>
                                                    </div>
                                                    <span class="button-text">Edit</span>
                                                </a>
                                            </div>
                                            <div class="d-flex justify-content-end" v-if="formData['4'].isRiderDetailsEditMode">
                                                <a href="#"
                                                    class="btn btn-primary btn-icon mr-3"
                                                    @click.prevent="cancelEditRiderDetails">
                                                    <div class="button-icon">
                                                        <svg class="icon icon-s">
                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-close"
                                                                href="/spa-assets/icons/icons.svg#sprite-close"></use>
                                                        </svg>
                                                    </div>
                                                    <span class="button-text">Cancel</span>
                                                </a>
                                                <a href="#"
                                                    class="btn btn-secondary"
                                                    @click.prevent="saveEditRiderDetails">
                                                    <span class="button-text">Save</span>
                                                </a>
                                            </div>
                                        </div>
                                    </validation-observer>
                                    <!-- #endregion Rider Details -->

                                    <!-- wj - add membership id field -->
                                    <div class="bg-w py-5 pb-3 px-4 mb-4" v-if="partnerCode == 'SHOP'">
                                        <p class="bt1 mb-0">MY.SHOP.COM Privileged Card ID</p>
                                        <validation-provider rules="required|min:7|max:12" v-slot="validator">
                                            <div class="form-group">
                                                <!-- Original class -->
                                                <!-- class="required membershipID" -->
                                                <input type="text"
                                                    :class="{
                                                        'form-control': true,
                                                        'is-invalid': validator.errors.length > 0
                                                    }"
                                                    id="membershipID" 
                                                    name="membershipID" 
                                                    data-name="MEMBERSHIP ID" 
                                                    placeholder="XXXXXXXXXXXX" 
                                                    min="7" 
                                                    max="12" 
                                                    value="" 
                                                    autocomplete="off" 
                                                    required
                                                    v-model="formData[4].membershipID">
                                                <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                    <span v-if="validator.failedRules.required">Complete your Membership ID</span>
                                                    <span v-else-if="validator.failedRules.min">Please enter at least 7 characters for your Membership ID</span>
                                                    <span v-else-if="validator.failedRules.max">Please only enter a maximum of 12 characters for your Membership ID</span>
                                                </small>
                                            </div>
                                        </validation-provider>
                                    </div>
                                    <!-- wj - end add membership id field -->

                                    <!-- wj - add membership id field -->
                                    <div class="bg-w py-5 pb-3 px-4 mb-4" v-if="partnerCode == 'sw'">
                                        <p class="bt1 mb-0">Please Enter your Sunway Pals Number (Optional)</p>
                                        <validation-provider rules="min:19|max:19" v-slot="validator">
                                            <div class="form-group">
                                                <!-- Original class -->
                                                <!-- class="required membershipID" -->
                                                <input type="text"
                                                    :class="{
                                                        'form-control': true,
                                                        'is-invalid': validator.errors.length > 0
                                                    }"
                                                    id="sunwayPals" 
                                                    name="sunwayPals" 
                                                    data-name="MEMBERSHIP ID" 
                                                    placeholder="XXXX-XXXX-XXXX-XXXX" 
                                                    min="19" 
                                                    max="19" 
                                                    value="" 
                                                    autocomplete="off" 
                                                    required
                                                    v-model="formData[4].membershipID">
                                                <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                    <span v-if="validator.failedRules.min">Please enter the 16 digits Sunway Pals Number.</span>
                                                    <span v-else-if="validator.failedRules.max">Please enter the 16 digits Sunway Pals Number.</span>
                                                </small>
                                            </div>
                                        </validation-provider>
                                    </div>
                                    <!-- wj - end add membership id field -->

                                    <validation-provider v-slot="validator" rules="mustBeTrue" v-if="commissionRate > 0">
                                        <div class="form-check d-none d-lg-block">
                                            <input type="checkbox"
                                                name="commissionAgreement"
                                                id="commissionAgreement"
                                                required
                                                :class="{
                                                    'form-check-input': true,
                                                    'is-invalid': validator.errors.length > 0
                                                }"
                                                v-model="formData['4'].commissionAgreement">
                                            <label for="commissionAgreement" class="form-check-label pr-md-5">
                                                I agree to pay a commission ({{formatAsNonDecimal(commissionRate)}}%) amount of RM {{ formatAsCurrency(commission) }} to {{partnerName}} for providing insurance advice & claims assistance / services. 
                                            </label>
                                            <svg class="icon icon-m tick-mark">
                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                            </svg>
                                            <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                                * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                            </div>
                                        </div>
                                    </validation-provider>

                                    <validation-provider v-slot="validator" rules="mustBeTrue">
                                        <div class="form-check d-none d-lg-block">
                                            <input type="checkbox"
                                                name="tncAgreement"
                                                id="tncAgreement"
                                                required
                                                :class="{
                                                    'form-check-input': true,
                                                    'is-invalid': validator.errors.length > 0
                                                }"
                                                v-model="formData['4'].tncAgreement">
                                            <label for="tncAgreement" class="form-check-label pr-md-5">
                                                <!--I hereby acknowledge that I have read the <a class="underline" target="_blank" href="/$partnerURLTitle/resource/MSIG%20Motorcycle%20Insurance%20PDS%20(Rebate).pdf">Product Disclosure Sheet</a> and agree to the <a href="#" class="underline" @click.prevent="showTncModal">Terms and Conditions</a>.-->
                                                I hereby acknowledge that I have read the <a class="underline" target="_blank" href="$productDisclosurePDFHTML">Product Disclosure Sheet</a> and agree to the <a href="#" class="underline" @click.prevent="showTncModal">Terms and Conditions</a>.
                                                
                                            </label>
                                            <svg class="icon icon-m tick-mark">
                                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                    href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                            </svg>
                                            <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                                * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                            </div>
                                        </div>
                                    </validation-provider>

                                    <div class="pt-4 wizard-navigation d-none d-lg-flex">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary">Checkout</a>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-4">
                                    <motor-summary-pane 
                                        :form-data="formData"
                                        :curr-step-num="currStep.stepNum"
                                    ></motor-summary-pane>
                                </div>
                            </div>
                        </div>
                        <div class="container">
                            <validation-provider v-slot="validator" rules="mustBeTrue" v-if="commissionRate > 0">
                                <div class="form-check d-lg-none mt-3">
                                    <input type="checkbox" 
                                        name="m_commissionAgreement" 
                                        id="m_commissionAgreement" 
                                        :class="{
                                            'form-check-input': true,
                                            'is-invalid': validator.errors.length > 0
                                        }"
                                        v-model="formData['4'].commissionAgreement">
                                    <label for="m_commissionAgreement" class="form-check-label pr-md-5">
                                        I agree to pay a commission ({{formatAsNonDecimal(commissionRate)}}%) amount of RM {{ formatAsCurrency(commission) }} to {{partnerName}} for providing insurance advice & claims assistance / services. 
                                    </label>
                                    <svg class="icon icon-m tick-mark">
                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                            href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                    </svg>
                                    <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                        * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                    </div>
                                </div>
                            </validation-provider>
                            <validation-provider v-slot="validator" rules="mustBeTrue">
                                <div class="form-check d-lg-none mt-3">
                                    <input type="checkbox" 
                                        name="m_tncAgreement" 
                                        id="m_tncAgreement" 
                                        :class="{
                                            'form-check-input': true,
                                            'is-invalid': validator.errors.length > 0
                                        }"
                                        v-model="formData['4'].tncAgreement">
                                    <label for="m_tncAgreement" class="form-check-label pr-md-5" v-if="commissionRate > 0">
                                        <!--I hereby acknowledge that I have read the <a class="underline" href="/$partnerURLTitle/resource/MSIG%20Motorcycle%20Insurance%20PDS%20(Rebate).pdf">Product Disclosure Sheet</a> and agree to the <a href="#" class="underline" @click.prevent="showTncModal">Terms and Conditions</a>.-->
                                        I hereby acknowledge that I have read the <a class="underline" href="$productDisclosurePDFHTML">Product Disclosure Sheet</a> and agree to the <a href="#" class="underline" @click.prevent="showTncModal">Terms and Conditions</a>.
                                    </label>
                                    <svg class="icon icon-m tick-mark">
                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                            href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                    </svg>
                                    <div class="invalid-feedback font-italic" v-if="validator.errors.length > 0">
                                        * Oops, looks like you haven't ticked the box yet. Please do so to proceed
                                    </div>
                                </div>
                            </validation-provider>
                        </div>
                        <div class="container pt-4 wizard-navigation d-lg-none flex-md-row-reverse justify-content-md-start">
                            <a @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" href="#" role="button" class="btn btn-default btn-primary mb-3 mb-md-0 mr-md-0">Checkout</a>
                            <a @click.prevent="goToPrevStep()" role="button" class="btn btn-default btn-outline-primary mr-md-3">Back</a>
                        </div>
                    </fieldset>

                    <fieldset class="wizard-section-5" v-if="currStep && currStep.stepNum === '5'">
                        <div class="container">
                            <div class="row">
                                <div class="col-12 col-lg-8">
                                    <div class="bg-w pt-5 pb-4 pb-md-5 px-4 mb-3">
                                        <h2 class="p2 mb-4">Payment</h2>

                                        <p class="bt1 color-black font-weight-bold">Payment Method:</p>
                                        <div class="vertical-scroller mb-md-3">
                                            <div class="d-flex">
                                                <!-- card one -->
                                                <!-- weijun - FPX hide -->
                                                <!-- wj - m3pa fixes: spelling error, isFPX changed to isFpx -->
                                                <div v-if="isFpxPaymentGateway" class="selection-infobox mb-3 mb-lg-0 mr-3">
	                                            <!-- weijun - FPX hide end -->
                                                    <label class="d-block">
                                                        <input type="radio" 
                                                            name="choosePayment" 
                                                            value="fpxPaymentGateway"
                                                            v-model="formData['5'].paymentMethod" />
                                                        <div class="box overflow-hidden">
                                                            <div class="header-match-height">
                                                                <div class="box--header bg-p2 text-white p-3">
                                                                    <h3 class="m-0">Online Banking</h3>
                                                                </div>
                                                                <div class="mt-4 mb-3">
                                                                    <svg class="icon icon-4xl">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-fpx"
                                                                            href="/spa-assets/icons/icons.svg#sprite-fpx">
                                                                        </use>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                            <div class="box--body px-3 pt-0 pb-3">
                                                                <div class="d-flex justify-content-center py-2">
                                                                    <div class="custom-rounded-checked">
                                                                        <svg class="icon icon-m tick-mark my-2">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </label>
                                                </div>

                                                <!-- card two -->
                                                <div class="selection-infobox mb-3 mb-lg-0 mr-3">
                                                    <label class="d-block">
                                                        <input type="radio"
                                                            name="choosePayment"
                                                            value="abmbGateway"
                                                            @change="initializeTooltips"
                                                            v-model="formData['5'].paymentMethod" />
                                                        <div class="box overflow-hidden">
                                                            <div class="header-match-height">
                                                                <div class="box--header bg-p2 text-white p-3">
                                                                    <h3 class="m-0">Credit/Debit Card</h3>
                                                                </div>
                                                                <div class="mt-4 mb-3">
                                                                    <svg class="icon icon-4xl">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-credit-card"
                                                                            href="/spa-assets/icons/icons.svg#sprite-credit-card">
                                                                        </use>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                            <div class="box--body px-3 pt-0 pb-3">
                                                                <div class="d-flex justify-content-center py-2">
                                                                    <div class="custom-rounded-checked">
                                                                        <svg class="icon icon-m tick-mark my-2">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </label>
                                                </div>

                                                <!-- card 3 -->
                                                <div v-if="isBoostPaymentGateway" class="selection-infobox mb-3 mb-lg-0 mr-3">
                                                    <label class="d-block">
                                                        <input type="radio"
                                                            name="choosePayment"
                                                            value="ewalletPaymentMethod"
                                                            v-model="formData['5'].paymentMethod" />
                                                        <div class="box overflow-hidden">
                                                            <div class="header-match-height">
                                                                <div class="box--header bg-p2 text-white p-3">
                                                                    <h3 class="m-0">E-Wallet</h3>
                                                                </div>
                                                                <div class="mt-4 mb-3">
                                                                    <svg class="icon icon-4xl">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-ewallets"
                                                                            href="/spa-assets/icons/icons.svg#sprite-ewallets">
                                                                        </use>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                            <div class="box--body px-3 pt-0 pb-3">
                                                                <div class="d-flex justify-content-center py-2">
                                                                    <div class="custom-rounded-checked">
                                                                        <svg class="icon icon-m tick-mark my-2">
                                                                            <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark"
                                                                                href="/spa-assets/icons/icons.svg#sprite-tick-mark">
                                                                            </use>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- FPX Banking -->
                                        <!-- wj - m3pa fixes: spelling error, isFPX changed to isFpx -->
                                        <div v-show="formData['5'].paymentMethod === 'fpxPaymentGateway' && isFpxPaymentGateway">
                                            <p class="bt1 mb-2">Bank:</p>
                                            <validation-provider :rules="formData['5'].paymentMethod === 'fpxPaymentGateway' ? 'required' : ''"
                                                v-slot="validator">
                                                <div class="form-group">
                                                    <select v-model="formData['5'].bankId"
                                                        :class="{
                                                            'form-control': true,
                                                            'is-invalid': validator.errors.length > 0
                                                        }">
                                                        <option disabled hidden selected value="">Select a Bank</option>
                                                        <option v-for="(bank, index) in banks" v-bind:key="index"
                                                            :value="bank.bankId">
                                                            {{ bank.bankName }}
                                                        </option>
                                                    </select>
                                                    <small class="error-message text-primary font-italic" v-if="validator.failedRules.required">
                                                        Please select a valid bank
                                                    </small>
                                                </div>
                                            </validation-provider>

                                            <p><small>Note: You need to have an active internet banking account with any of the FPX performing banks to use FPX.</small></p>

                                            <p class="bt1 mb-2">
                                                Email Address: <small class="font-italic">(For transaction status)</small>
                                            </p>

                                            <div class="row">
                                                <div class="col-12 col-md-6">
                                                    <validation-provider :rules="formData['5'].paymentMethod === 'fpxPaymentGateway' ? 'required|email' : ''"
                                                        v-slot="validator">
                                                        <div class="form-group">
                                                            <input type="email" 
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                placeholder="E.g.: you@gmail.com"
                                                                v-model="formData['5'].fpxEmail">
                                                            <small class="error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                <span v-if="validator.failedRules.required">* Complete the Email field.</span>
                                                                <span v-else-if="validator.failedRules.email">Please enter a valid email address</span>
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- card/debit card -->
                                        <!-- wj - m3pa bug fix: credit/debit payment doesnt show up -->
                                        <!-- original code - <div v-show="formData['5'].paymentMethod === 'abmbGateway' && !isFpxPaymentGateway"> -->
                                        <div v-show="formData['5'].paymentMethod === 'abmbGateway'">
                                            <div class="credit-card-indicator d-flex align-items-center mb-3"
                                                :class="{
                                                    'has-card': cardType
                                                }">
                                                <svg class="icon icon-3xl mr-2"
                                                    :class="{
                                                        'active': cardType === 'VISA'
                                                    }">
                                                    <use href="/spa-assets/icons/icons.svg#sprite-visa"></use>
                                                </svg>
                                                <svg class="icon icon-xxl"
                                                    :class="{
                                                        'active': cardType === 'MASTER'
                                                    }">
                                                    <use href="/spa-assets/icons/icons.svg#sprite-mastercard"></use>
                                                </svg>
                                            </div>

                                            <div class="row">
                                                <div class="col-12 col-md-7">
                                                    <validation-provider 
                                                        :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required' : ''" 
                                                        v-slot="validator">
                                                        <div class="form-group">
                                                            <label class="bt1">Card Number:</label>
                                                            <input type="text"
                                                                placeholder="xxxx xxxx xxxx xxxx"
                                                                v-mask="'#### #### #### ####'"
                                                                name="cardnumber"
                                                                v-model="formData['5'].ccNo"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }"
                                                                autocomplete="cc-number">
                                                            <div class="small error-message text-primary font-italic">
                                                                <span v-if="validator.failedRules.required">* Complete the Card Number field.</span>
                                                                <span v-else-if="validator.failedRules.isCreditCardValid">* Please enter a valid Visa / MasterCard No</span>
                                                            </div>
                                                        </div>
                                                    </validation-provider>
                                                </div>
                                                <div class="col-12 col-md-7">
                                                    <validation-provider :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required' : ''" v-slot="validator">
                                                        <div class="form-group">
                                                            <label class="bt1">Name on Card:</label>
                                                            <input type="text"
                                                                placeholder="Name on Card"
                                                                v-model="formData['5'].cardHolderName"
                                                                name="ccname"
                                                                autocomplete="cc-name"
                                                                :class="{
                                                                    'form-control': true,
                                                                    'is-invalid': validator.errors.length > 0
                                                                }">
                                                            <small v-if="validator.failedRules.required" class="error-message text-primary font-italic">
                                                                <span>* Complete the Name field.</span>
                                                            </small>
                                                        </div>
                                                    </validation-provider>
                                                </div>

                                                <div class="col-12 col-md-10">
                                                    <div class="form-row">
                                                        <validation-provider :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required|isCreditCardExpiryValid' : ''" v-slot="validator" slim>
                                                            <div class="col-3 form-group">
                                                                <label class="bt1">Expiration Date:</label>
                                                                <input type="text" 
                                                                    placeholder="MM/YY"
                                                                    name="expirationDate"
                                                                    name="cc-exp"
                                                                    autocomplete="cc-exp"
                                                                    v-mask="'##/##'"
                                                                    v-model="formData['5'].expiry"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }">
                                                                <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">* Complete the Expiry (MM/YY) field.</span>
                                                                    <span v-if="validator.failedRules.isCreditCardExpiryValid">* Please enter a valid Expiry date (MM/YY).</span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                        <validation-provider
                                                            :rules="formData['5'].paymentMethod === 'abmbGateway' ? 'required|integer|length:3' : ''"
                                                            v-slot="validator" slim>
                                                            <div class="form-group col-1">
                                                                <label class="bt1">CVV
                                                                    <span class="d-inline-flex">
                                                                        <div class="ml-2 btn-tooltip" data-toggle="tooltip"
                                                                            data-placement="right"
                                                                            title="The last 3 digits behind your credit card">
                                                                            ?
                                                                        </div>
                                                                    </span>
                                                                </label>
                                                                <input type="text"
                                                                    placeholder="xxx"
                                                                    maxlength="3"
                                                                    name="cvc"
                                                                    style="width:110px;"
                                                                    autocomplete="cc-csc"
                                                                    v-model="formData['5'].cvv"
                                                                    :class="{
                                                                        'form-control': true,
                                                                        'is-invalid': validator.errors.length > 0
                                                                    }">
                                                                <div class="small error-message text-primary font-italic" v-if="validator.errors.length > 0">
                                                                    <span v-if="validator.failedRules.required">* Complete the CVV field.</span>
                                                                    <span v-else-if="validator.failedRules.length || validator.failedRules.integer">* Please enter a valid CVV</span>
                                                                </div>
                                                            </div>
                                                        </validation-provider>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>

                                        <!-- E-Wallet -->
                                        <div v-show="formData['5'].paymentMethod === 'ewalletPaymentMethod' && isBoostPaymentGateway">
                                            <p class="bt1">Select Your Preferred E-Wallet:</p>
                                            <validation-provider
                                                :rules="formData['5'].paymentMethod === 'ewalletPaymentMethod' ? 'required' : ''"
                                                v-slot="validator"
                                                slim>
                                                <div>
                                                    <div class="list variant-bank">
                                                        <div class="list-item">
                                                            <input 
                                                                type="radio"
                                                                name="ewalletVendor" 
                                                                id="radEWallet1"
                                                                value="boostPaymentGateway"
                                                                v-model="formData['5'].ewalletVendor"
                                                                :class="validator.errors.length > 0 ? 'is-invalid' : ''">
                                                            <label for="radEWallet1" style="border-radius:10px;border: .2px solid #000000;">
                                                            <div class="wallet-rounded-checked">
                                                                    <svg class="icon icon-s tick-mark">
                                                                        <use xlink:href="/spa-assets/icons/icons.svg#sprite-tick-mark" href="/spa-assets/icons/icons.svg#sprite-tick-mark"></use>
                                                                    </svg>
                                                                </div>
                                                                <div class="bank-logo">
                                                                    <img src="spa-assets/img/boost.png" alt="Boost logo">
                                                                </div>
                                                                
                                                                <div class="bank-name">
                                                                    Boost
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="error-message small text-primary" v-if="validator.failedRules.required">
                                                        * Please select an e-Wallet Provider
                                                    </div>
                                                </div>
                                            </validation-provider>
                                        </div>
                                    </div>

                                    <!-- wj - m3pa fixes: spelling error, isFPX changed to isFpx -->
                                    <div class="d-none d-md-block" v-if="formData['5'].paymentMethod === 'fpxPaymentGateway' && isFpxPaymentGateway">
                                        <p class="bt2">By clicking <strong>"Pay Now"</strong> button, you agree to FPX's
                                            <a href="https://www.mepsfpx.com.my/FPXMain/termsAndConditions.jsp" target="_blank" class="underline">Terms & Conditions</a>.
                                        </p>
                                    </div>
                                    
                                    <div class="wizard-navigation d-none d-md-flex pt-4">
                                        <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mr-4">Back</a>
                                        <button @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" role="button" class="btn btn-default btn-primary">Pay Now</button>
                                    </div>
                                </div>

                                <div class="col-12 col-lg-4">
                                    <motor-summary-pane 
                                        :form-data="formData"
                                        :curr-step-num="currStep.stepNum"
                                    ></motor-summary-pane>
                                </div>

                                <div class="container pt-4 wizard-navigation d-md-none">
                                    <a @click.prevent="goToPrevStep()" href="#" role="button" class="btn btn-default btn-outline-primary mb-3">Back</a>
                                    <button @click.prevent="observer.handleSubmit(onSubmit).then(function() { scrollToError() })" role="button" class="btn btn-default btn-primary">Pay Now</button>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </validation-observer>

            <div class="page-loader">
                <div class="spinner-container">
                    <div class="spinner-border text-secondary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error message section -->
        <div class="error-container py-5 bg-p2d" v-if="!canProceed">
            <div class="container">
                <div class="bg-w py-5 px-3 px-md-5">
                    <div class="text-center">
                        <img src="~@/spa-assets/img/prescreen-error-icon.png" alt="Error" class="img-responsive mb-3">
                        <h3>Sorry, we are unable to proceed with your request online.</h3>
                    </div>
                    <div class="bt2 text-center" v-html="errorMessage"></div>
                    <p class="bt2 text-center">For any further enquiries, please email us at <a v-bind:href="'mailto:'+emailUs">{{emailUs}}</a>.</p>
                </div>
            </div>
        </div>
        <!-- Error message section -->


        <!-- Form to Submit Data to Summary Page -->
        <form id="summary-form-placeholder" class="d-none" enctype="application/x-www-form-urlencoded"></form>

        <!-- The error form returned from processPurchase will be placed here -->
        <div id="error-form-placeholder" class="d-none"></div>

        <form action="/dotCMS/purchase/paynow" id="thePaymentForm" name="paymentForm" method="post" novalidate class="d-none">
            <input name="partnerCode" type="hidden" v-model="partnerCode">
            <input name="productCode" type="hidden" v-model="productCode">
            <input name="productName" type="hidden" v-model="productName">
            <input name="purchaseId" type="hidden" v-model="formData['4'].purchaseTempId">
            <input name="formula" type="hidden" v-model="formula">
            <input name="paymentMethod" type="hidden" v-model="formData['5'].paymentMethod">
            <input name="ccNo" type="hidden" v-model="formData['5'].ccNo">
            <input name="cardHolderName" type="hidden" v-model="formData['5'].cardHolderName">
            <input name="expiry" type="hidden" v-model="formData['5'].expiry">
            <input name="cvv" type="hidden" v-model="formData['5'].cvv">
            <input name="wallet" type="hidden" v-model="formData['5'].ewalletVendor">
            <input name="bankId" type="hidden" v-model="formData['5'].bankId">
            <input name="fpxEmail" type="hidden" v-model="formData['5'].fpxEmail">
        </form>

        <div id="session-modal" class="modal fade variant-msig" aria-hidden="true">
            <div class="modal-dialog partial-screen-modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-t2">
                        <h6 class="w text-center modal-title">Information</h6>
                        <button class="modal-header-btn button-icon btn-close" data-dismiss="modal" @click="wishToRestoreSession = false">
                            <svg class="icon icon-s">
                                <use xlink:href="/spa-assets/icons/icons.svg#sprite-close-popup" href="/spa-assets/icons/icons.svg#sprite-close-popup"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="modal-container padding-top-3xl padding-bottom-l">
                        <div class="px-3 py-5 content-container">
                            <p class="bt1 text-center">Would you like to restore your previous session?</p>
                            <div class="d-flex flex-column flex-md-row align-items-center justify-content-md-center">
                                <button class="btn btn-primary mr-3" data-dismiss="modal" @click="wishToRestoreSession = true">Yes</button>
                                <button class="btn btn-secondary" data-dismiss="modal" @click="wishToRestoreSession = false">No</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endverbatim %}
</div>

<script type="text/x-template" id="summary-pane-template">
    {% include "./motorcycle-summary-pane.twig" %}
</script>
</script>
<style lang="scss">
/* Fake for IE. because it doesn't emit the hit event when using display:none */
.vbt-autcomplete-list--hidden {
  animation-name: hide;
  animation-fill-mode: both;
  animation-duration: 0.3s;
  animation-timing-function: linear;
}

@keyframes hide {
  to {
    visibility: hidden;
    display: none;
  }
}
</style>

{% embed "./modal.twig" with {
    modalId: 'information-modal',
    modalHeaderTitle: 'Information'
} %}
    {% block modalContent %}
        <div class="px-3 py-5 content-container"></div>
    {% endblock %}
{% endembed %}
